---
title: MesosphereによるスイッチHackのブレイクスルーとは
date: 2020-09-06
description: Mesosphereとはなんぞや、という方向けの解説です
category: Hack
tag:
  - CFW
---

## Mesosphere とは

> It's a good day :)
>
> [https://twitter.com/SciresM/status/1285495615112134657](https://twitter.com/SciresM/status/1285495615112134657)

以前[@SciresM](https://twitter.com/SciresM)氏がツイートしていたのをご存知の方がひょっとしたらいらっしゃるかもしれません。

当ブログでは完成するまで特に取り上げていなかったのですが、どうやらこれがおおよそ完成したようなので記事にしようと思います。

SciresM 氏といえばスイッチの CFW の親分である Atmosphere の開発者なのですが、気になるのは Atmosphere と Mesosphere は何が違うのかということですね。

### Mesosphere の仕組み

Atmosphere は権限のレベルによって五つのコンポーネントにわかれています。これはユーザレベルのものから TrustZone レベルのものまで様々です。

現在の CFW は RCM からペイロードを読み込ませて、という起動方法をとっていますが、これはニンテンドースイッチのシステムファームウェアである Horizon OS をアプリケーションレベルでカスタマイズしたものを利用しているわけです。

つまり、CFW という名の通り OFW のデータを流用しつつ、いろいろパッチを当てたファイルを使っているという感じです。

それに対して Mesosphere はニンテンドースイッチの純正カーネルを使用しない仕組み（方向性）になっています。これは iPhone で Andoroid を動かしたりするような、デバイスのハードウェアだけ利用してファームウェアを自作するようなものです。

既にあるものを流用する単純な CFW に比べて開発の難易度が格段に高いのはいうまでもありません。というか、いままで他のコンシューマ機で純正 FW に依存しない CFW ってリリースされたことあるんですか？

かなりなんでもできていた PSP や PS3 でも元の FW にパッチを当てた CFW をインストールする方式（その際、署名がない CFW のインストールをブロックされないようにする仕組みが必要）だったので、そういうコンシューマ機があるようには思えないのですが。

ファームウェア（カーネル）レベルでカスタマイズできるということは、RCM など不要で起動時に自動で CFW として起動することも可能になることを意味します。うーん、そう考えるとかなり需要はありそうですね。

### BAN 対策もすごいらしい

> As of today, Mesosphere has all the functionality present in the real 10.x kernel binary. Still got debug functionality to add (/bugfixes), but it's amazing to be at the end of this part of the project.<br><br>I played animal crossing online for two hours last night with no issues :)
>
> [https://twitter.com/SciresM/status/1289304650097688576](https://twitter.com/SciresM/status/1289304650097688576)

[@SciresM](https://twitter.com/SciresM)が Mesosphere の動作テストとしてあつまれどうぶつの森を CFW 状態でオンラインプレイしたそうです。

当ブログでは CFW 状態でのオンラインプレイは絶対にやめていただきたいので推奨はしないのですが、二時間プレイしても全く BAN されなかったとのこと。

スプラだと一日後に BAN されるのですが、あつ森だと最短でどのくらいで BAN されるんでしょうね？

で、これでスプラのオンラインチーターが増えるんじゃないかと危惧する方がいるかも知れませんが、それについては問題ないはずです。というのも、スプラではアプリケーションレベルでのファイル整合性チェックを行っているためで、Mesosphere によってシステム側の改造がチェックできなくても、自動切断機能が正しく動作することが期待されるからです。

まあでもこれがあれば 90DNS などを設定しなくて良くなるはずなので、その点はちょっと嬉しいかもしれません。

## Mesosphere の開発状況

先述したとおり、おおよその開発は終わって今後デベロッパー向けにドキュメントが作成されるようです。

GitHub の Wiki 機能を利用するような内容のツイートがあったのですが、内容を理解できるユーザがどの程度いるのかかなり怪しいところです（当然ぼくはわかりません）

誰かが日本語に翻訳しないかなと期待しつつ、翻訳したところでそれを活用できるユーザがほとんどいないことを考えると（活用できるならそもそも公式ドキュメントが読めそう）、やってくれる人はいなさそうな気もします。

## まとめ

Mesosphere 自体は純正 FW に依存しない CFW 開発の足がかりとなる可能性が高い、素晴らしい功績です。

が、あまりにローレベルな領域に関わる内容であるために理解できる開発者がどのくらいいるのか全く予想がつかない現状です。

昔、iOS 開発界隈で Jailbreak に関わるオープンソースプロジェクトがあったのですが放置されたっていう歴史があるのでそうならないことを祈るばかりですね。

記事は以上。
