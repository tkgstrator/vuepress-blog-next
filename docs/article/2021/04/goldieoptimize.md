---
title: 最も効率的なアタリ位置はどこか
date: 2021-04-24
description: 各ステージで最も稼げそうなアタリ位置とそのシードを求めました
category:
  - Nintendo
tag:
  - Splatoon2
  - Salmon Run
---

## 最適なアタリ位置とは

重要になってくるのが「最適なアタリ位置」という概念である。

少しでもキンシャケ探しに精通しているプレイヤーであれば「コンテナに近ければ良い」と考えるかもしれない。これはある意味で正解であるが、ある意味で間違っている。

例えば、ポラリスにおける最もコンテナに近いアタリ位置は E であるが、満潮時には 12 連続で E がアタリになるシードで 182 納品という記録が達成されている。

しかし、通常潮位の場合は 9 連続で E がアタリになるシードが見つかっているにも関わらず、納品数は 135 にとどまっている。9 連続でキンシャケをたおすことができれば $9×18=162$ 納品は見込めるはずなのだが、なぜこんなに減ってしまったのだろうか？

対してトキシラズいぶし工房では F が最もコンテナに近く、満潮では 12 連続で F がアタリになるシードで 164 納品、通常では 9 連続 F がアタリになるシードで 159 納品が達成されている。

通常と満潮でほとんど納品数に差がないトキシラズと、大きく差がついたポラリス。一体何が違うのだろうか？

### 重要になるキンシャケルート

実は金イクラ乱獲においてキンシャケのアタリ位置というのはさほど重要ではない。アタリ位置が重要になってくるのはゲーム開始直後と終了間際（最後の一回の位置）だけである。つまり、イベント中に二回だけである。

72 納品以上しようとすれば最低でも四回はキンシャケをたおさなければいけないので、寄与率はたかだか 50%ということになる。

では何が重要になるかというとキンシャケがコンテナに近づいてくるか遠ざかっていくかという「キンシャケが通るルート」である。

どんなに火力の高い編成でもキンシャケを空中でたおし続けることはできない。もちろん、全くイクラを運ばなければクマサン印のチャージャー × 4 の編成なら可能であるが、それでは納品数が伸びない。

金イクラ運び役が必要になる以上、キンシャケをしばらく歩かせて「よりコンテナに近い位置」で金イクラをドロップさせる必要がある。ポラリスで E アタリが通常で納品数が伸びなかったのは、満潮であればコンテナに近づくルートを通るにも関わらず、通常の場合は遠ざかっていくルートをとるためだ。

@[youtube](https://www.youtube.com/watch?v=J7nrti31gzA)

この差はきっとあなたが思っているよりも大きい。というのも、キンシャケが遠ざかっていく場合はキンシャケが降りた瞬間には攻撃するということを強制されるためだ。近づいてくるのであれば近づいてくるまで遠くのイクラを運ぶという別の立ち回りが可能になる。

なので、ポラリス通常においては E が連続してアタリになるのは都合が悪いのである。

キンシャケがコンテナ近くを通り、かつ近づいてくるようなルートを「ウマルート」と呼ぶことにしよう。

## 全ステージのウマルートとその確率

トキシラズは F、ドンブラコは E の連続アタリが最良であることがわかっているので割愛します。

### シェケナダム

|     |   1   |   2   |   3   |  4  |
| :-: | :---: | :---: | :---: | :-: |
|  A  |   F   | **G** |   D   |  C  |
|  B  |   E   |   F   |   C   |  I  |
|  C  |   E   |   D   |   H   |  G  |
|  D  |   C   |   A   |   -   |  -  |
|  E  |   C   |   H   | **B** |  -  |
|  F  |   A   |   G   |   H   |  B  |
|  G  | **F** |   C   | **A** |  -  |
|  H  |   I   |   C   |   E   |  F  |
|  I  |   H   |   B   |   A   |  -  |

ウマルートが全 31 ルート中 4 つしか存在しない。じゃあ確率は $\frac{4}{31}$ かと思われるがそうではない。

例えば AG のルートは $\frac{1}{9}×\frac{1}{4}=\frac{1}{36}$ の確率でしか出現しないが、EB のルートは $\frac{1}{9}×\frac{1}{3}=\frac{1}{27}$ の確率で出現する。

これらを考えると、ウマルートを通る確率は、

$\frac{1}{36}+\frac{1}{27}+\frac{1}{27}+\frac{1}{27}=\frac{5}{36}$ となり $\frac{1}{7}$ よりもわずかに小さい。このくらいの確率があれば 7 連続か 8 連続でウマルートを通るシードが見つかる可能性がある。

### シャケト場

|     |   1   |   2   |   3   |   4   |
| :-: | :---: | :---: | :---: | :---: |
|  A  |   C   |   E   |   -   |   -   |
|  B  |   D   |   F   | **G** |   H   |
|  C  |   A   |   D   | **I** |   F   |
|  D  |   G   |   B   |   I   |   C   |
|  E  |   A   | **G** |   D   |   F   |
|  F  |   H   |   B   |   G   |   I   |
|  G  |   D   | **I** |   F   | **B** |
|  H  |   F   | **I** |   B   | **E** |
|  I  | **G** |   D   |   F   | **C** |

$\frac{1}{36}×9=\frac{1}{4}$ となる。このくらいの確率があれば 11 連続でウマルートを通るシードが見つかる可能性がある。

ただ E アタリはあまりにも遠すぎるのでできれば考慮に入れたくない。また、H や C アタリも B、G、I に比べて遠い。

仮に B、G、I だけに絞るのであれば $\frac{1}{36}×5=\frac{5}{36}$ となる。こうなればシャケト場と同じ確率なのでこちらで考えても良いかもしれない。

### ポラリス

コンテナ前を通るのが G アタリしか存在しない。G アタリであれば必ずゴールは A になるのでウマルートの確率は $\frac{1}{7}$ である。

## 内部 ID に変換する

全通り検索しようとすると速度の面から C++を使うしかないのだが、C++版のライブラリはアルファベットでの入力に対応していないので内部 ID に変換する。

| シェケナダム | アルファベット | 内部 ID |
| :----------: | :------------: | :-----: |
|      1       |       AG       |   06    |
|      2       |       EB       |   41    |
|      3       |       GF       |   65    |
|      4       |       GA       |   60    |

この四つのルートが WAVE1 の通常キンシャケ探しで 8 連続以上出現するシードを求めた。

ただし、同じウマルートであっても明確に価値は違ってくる。

AG ルートは A の位置が遠すぎて寄ってくるまでに時間がかかりすぎるからだ。

これらのシードの中から AG ルートが最も少ないものを選ぶとよいだろう。また EG ルートは明らかに FG ルートよりも勝るが、AG ルートと比べるとその差は小さい。

FG ルートは少ないほうがいいだろうが、まずは AG ルートの出現数を最小化するのが良いだろう。

|  シード  |       アタリ位置       |
| :------: | :--------------------: |
| 5A7491DF | G、G、G、G、G、G、G、E |
| 9DE2CFEA | E、G、G、G、G、G、E、E |
| CC870394 | G、E、G、G、E、E、G、G |

となれば候補はこの三つに絞られる。

::: tip

何故か FG ルートは一件もみつからなかった。
WAVE1 におけるインデックスバグの弊害かもしれない。

:::

こうなればゴール位置よりもアタリ位置のほうが重要になってくる。G の方は金網があり、即割したときに拾いにくいことを考えると G よりも E の方が勝る気はする。

となれば 9DE2CFEA が本命ではないかと思われる。これなら軽く 120 納品はできる。[Salmon Run Records](https://gungeespla.github.io/salmon_run_records/) によれば現行記録は 80 納品らしいので更新は確実だろう。

| シャケト場 | アルファベット | 内部 ID |
| :--------: | :------------: | :-----: |
|     1      |       BG       |   16    |
|     2      |       GI       |   68    |
|     3      |       GB       |   61    |
|     4      |       IG       |   86    |
|     5      |       IC       |   82    |

シャケト場であればこのルートがウマルートと言える。全検索したところ 30 通りあることがわかった。

ここからは先程と同じく、アタリ位置で絞っていくことにする。B は G や I と比べてわずかに遠いのでなるべく減らしたい。特に、初手 B は致命的な納品の遅れを生むので初手は G か I のどちらかでないといけない。

I がアタリのあと反対側の G がアタリというのはあける手間が増えそうだが、十分に射程の長い高火力のブキ（クマサン印のチャージャーなど）がいればすぐに開栓できるのでそこまで心配ではない。

むしろ B がアタリだと部屋の中からあける手段がボムくらいしかなくなってしまうのでやはり B アタリを減らすのが得策だと思われる。

ここまでの考えを推し進めると候補となるシードは以下の四つに絞られる。ただ気になるのはどのシードも九回目のアタリ位置が美味しくないということである。

|  シード  |       アタリ位置       | 次のアタリ位置 |
| :------: | :--------------------: | :------------: |
| 45699E0E | I、G、G、I、I、I、I、I |       D        |
| A115223A | I、G、G、G、I、I、G、G |       F        |
| AA81940A | G、G、G、I、I、I、G、G |       A        |
| B0721460 | I、G、G、G、G、G、I、G |       E        |

## 回数もやはり大事

ここまででウマルートを選択し、それらのルートが 8 回連続で出現するようなシードを探してきたが、よく考えればウマルートの回数も大事だがトキシラズの通常キンシャケ探しの場合は 10 回目も開栓して数個運ぶことができたので、8 回しかウマルートがないというのは微妙な気もする。

数回 BG ルートが入っていてもいいから 9 連続や 10 連続を探すべきではないだろうか。

ということで初手ではない場合に 1 ~ 2 回程度の A アタリを許容することにした。

| シェケナダム | AG ルート数 | ウマルート数 |
| :----------: | :---------: | :----------: |
|   00EABDA2   |      1      |      11      |

すると驚くべきことに 00EABDA2 の初期シードでウマルート連続数 11 を達成した。他がたかだか 8 回や 9 回なのに対して 11 連続を達成している。

ただし、途中に A ルートを 1 回含むため 11 回開栓することは不可能だと思われる。ポラリスで常にコンテナ横のシードでも 11 回目を開栓して数個しか運べなかったのでこのケースの場合だと 9 回目がいくつ運べるか運べないかといったところだろう。

| シェケナダム |     バイナリ     | AG ルート数 |
| :----------: | :--------------: | :---------: |
|   00EABDA2   | 401DA0D240B497F2 |      1      |
|   9DE2CFEA   | 40BCB3D240FD99F2 |      0      |

ここまでをまとめるとシェケナダムはこのどちらかが候補と言えるだろう。まずは 9DE2CFEA でチャレンジしてみて、時間があまるようであれば 00EABDA2 に挑戦するのが良いと思われる。

唯一の問題点は 00EABDA2 には G アタリしか存在しないという点である。G アタリは E アタリに比べて損なので時間が納品時間が足りない可能性がある。

| シャケト場 | BG ルート数 | ウマルート数 |
| :--------: | :---------: | :----------: |
|  0C16DB59  |      4      |      9       |
|  EB4B81D2  |      1      |      9       |

シャケト場の場合は九回目の開栓が間に合うのであればこれらが候補になるだろう。他の候補は残念ながら全てウマルート数が 8 であり、シャケト場のように 11 連続のような大当たりは存在しなかった。

ただし、C アタリや H アタリを許容するようにすればもう少し良いシードが見つかるかもしれない。

## まとめ

長くなったがここまでをまとめると以下のようになる。

### シェケナダム

| シェケナダム |     バイナリ     | ウマルート数 |
| :----------: | :--------------: | :----------: |
|   00EABDA2   | 401DA0D240B497F2 |      11      |
|   9DE2CFEA   | 40BCB3D240FD99F2 |      9       |

### シャケト場

| シャケト場 |     バイナリ     | ウマルート数 |
| :--------: | :--------------: | :----------: |
|  0C16DB59  | C082A1D2206B9BF2 |      9       |
|  EB4B81D2  | 6069BDD2403A90F2 |      9       |

### ポラリス

| ポラリス |           アタリ位置            |     バイナリ     |
| :------: | :-----------------------------: | :--------------: |
| 00FA5636 |  G、G、G、G、G、G、G、G、G、G   | 401FA0D2C0C68AF2 |
| 3700FFCD | G、E、G、G、G、G、G、G、G、G、E | 00E0A6D2A0F99FF2 |
| 724DC84E | G、G、G、G、G、G、G、G、G、E、E | A049AED2C00999F2 |
| AE8CB114 |  E、G、G、G、G、G、G、G、G、G   | 80D1B5D2802296F2 |
| DB6E2A56 |  G、G、G、G、E、G、G、G、G、G   | C06DBBD2C04A85F2 |
| E7B57E12 |  G、E、G、G、G、G、G、G、G、G   | A0F6BCD240C28FF2 |
| EB4B81D2 |  G、G、G、G、E、G、G、G、G、G   | 6069BDD2403A90F2 |

ポラリスは G アタリが最良ではあるものの、少しだけ距離があるため初手は最もコンテナに近い E の方が嬉しい。

即割してしまえばゴール位置よりもアタリ位置のほうが重要になってくるからだ。また、後半もキンシャケを当ててから近づいてくるまでの時間がもったいないので G アタリでは間に合わない可能性が高い。

ここで示したシードはそのような理想のアタリ位置からは少しズレている。

理想となるのは E、E、G、G、G、G、G、G、G、E のようなアタリ位置である。11 回連続でウマルートになるシードもあるが、現実的に 11 回目のキンシャケを出現させるのは時間的に不可能である。

こうなると最初が E が得か、最後が E が得になるかの問題となってくる。
最初に E で時間的に余裕をつくれば後半が G であっても納品する時間があるかもしれないし、最後が E なら初手で G で多少遅れても問題ない気がする。

少なくとも全部 G が 10 回連続するよりは効率が良いだろう。

記事は以上。
