---
title: キンシャケ探しのゴール位置配列を求めてきた
date: 2021-04-23
description: キンシャケ探しのアタリ位置は常に同じ配列が入っているが、ゴール位置はアタリ位置によって配列が変わってくる
category:
  - Nintendo
  - Programming
tag:
  - Splatoon2
  - Salmon Run
  - Javascript
---

## ゴール配列

前回の記事でシェケナダムのゴール位置配列を少しばかり求めたが、今回たまたまだるまっちょさんのご協力が得られたので他のステージについても調査を行った。

その結果を発表しようとおもうのだが、ぶっちゃけてしまうとエンドユーザには何の魅力もないデータである。

### シェケナダム

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  F  |  G  |  D  |  C  |
|  B  |  E  |  F  |  C  |  I  |
|  C  |  E  |  D  |  H  |  G  |
|  D  |  C  |  A  |  -  |  -  |
|  E  |  C  |  H  |  B  |  -  |
|  F  |  A  |  G  |  H  |  B  |
|  G  |  F  |  C  |  A  |  -  |
|  H  |  I  |  C  |  E  |  F  |
|  I  |  H  |  B  |  A  |  -  |

シャケト場については完全解析が終了した。

### ドンブラコ

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  ?  |  ?  |  -  |  -  |
|  B  |  ?  |  ?  |  -  |  -  |
|  C  |  ?  |  ?  |  -  |  -  |
|  D  |  ?  |  ?  |  -  |  -  |
|  E  |  ?  |  ?  |  ?  |  ?  |
|  F  |  ?  |  ?  |  ?  |  ?  |
|  G  |  ?  |  ?  |  -  |  -  |
|  H  |  ?  |  ?  |  -  |  -  |

3.2.0 以降で大きくルートが変更されたため未調査である。

### シャケト場

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  C  |  E  |  -  |  -  |
|  B  |  D  |  F  |  G  |  H  |
|  C  |  A  |  D  |  I  |  F  |
|  D  |  G  |  B  |  I  |  C  |
|  E  |  A  |  G  |  D  |  F  |
|  F  |  H  |  B  |  G  |  I  |
|  G  |  D  |  I  |  F  |  B  |
|  H  |  F  |  I  |  B  |  E  |
|  I  |  G  |  D  |  F  |  C  |

シャケト場については完全解析が終了した。

### トキシラズ

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  F  |  G  |  B  |  C  |
|  B  |  A  |  E  |  D  |  -  |
|  C  |  F  |  A  |  G  |  E  |
|  D  |  B  |  F  |  G  |  -  |
|  E  |  B  |  C  |  -  |  -  |
|  F  |  A  |  D  |  -  |  -  |
|  G  |  A  |  D  |  C  |  -  |

トキシラズについては完全解析が終了した

### ポラリス

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  ?  |  ?  |  -  |  -  |
|  B  |  G  |  -  |  -  |  -  |
|  C  |  ?  |  ?  |  ?  |  -  |
|  D  |  ?  |  ?  |  -  |  -  |
|  E  |  A  |  -  |  -  |  -  |
|  F  |  C  |  -  |  -  |  -  |
|  G  |  B  |  -  |  -  |  -  |

ポラリスはゴール位置が一つしかないようなアタリ位置が四つもあるので、最初から配列を埋めることができる。

## ポラリスを調査する

| 実測値 | アタリ位置 | ゴール位置 |
| :----: | :--------: | :--------: |
|   1    |     G      |     B      |
|   2    |     E      |     A      |
|   3    |     E      |     A      |
|   4    |     G      |     B      |
|   5    |     E      |     A      |
|   6    |     F      |     C      |
|   7    |     C      |     D      |
|   8    |     D      |     A      |
|   9    |     G      |     B      |
|   10   |     E      |     A      |

アタリがこうなるように乱数消費フラグを調整すると以下のようになった。

```javascript
mReuse = [true, true, true, true, true, true, false];
mSucc = ["A", "B", "C", "D", "E", "F", "G"];
mDest = [["1", "2"], ["G"], ["1", "2", "3"], ["1", "2"], ["A"], ["C"], ["B"]];
```

上の調査では B がアタリ位置のデータがないのでわからないのだが、E と F はゴール位置が一つしかないにも関わらず乱数を余計に一回消費する。まったくもって謎である。

まあなんとなく調査は進んで以下の結果を得た。

|     |  1  |  2  |  3  |  4  |
| :-: | :-: | :-: | :-: | :-: |
|  A  |  E  |  D  |  -  |  -  |
|  B  |  C  |  -  |  -  |  -  |
|  C  |  D  |  B  |  F  |  -  |
|  D  |  A  |  C  |  -  |  -  |
|  E  |  A  |  -  |  -  |  -  |
|  F  |  C  |  -  |  -  |  -  |
|  G  |  B  |  -  |  -  |  -  |

移植したステージでもキンシャケ探しが正しく動くのは少し意外だった。

## 進捗報告

|              |   通常   |   満潮   |
| :----------: | :------: | :------: |
| シェケナダム | 解析済み | 解析済み |
|  ドンブラコ  |  未解析  | 一部不明 |
|  シャケト場  | 解析済み | 解析済み |
|  トキシラズ  | 解析済み | 解析済み |
|   ポラリス   | 解析済み | 解析済み |

ここまでをまとめると上の表のようになる。

ポラリスはアタリ位置に対してゴール位置の数が極めて少ないのでやってやれないことはないように思う。めんどくさいのはドンブラコで、解析にかかるコストに対してリターンが見合っていない。気が向けばやるかもしれないが、すぐにやるかどうかはわからない。

なおこれらのデータは既に[Ocean Calc](https://salmonrun-records.netlify.app/ocean/)に反映済みなので気が向いた方はいろいろ弄って遊んでみてほしい。
